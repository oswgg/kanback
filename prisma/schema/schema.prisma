datasource db {
    provider          = "mysql"
    url               = env("DATABASE_URL")
    shadowDatabaseUrl = env("SHADOW_DB_URL")
}

generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["prismaSchemaFolder"]
}

model Organization {
    uuid         String   @id @default(uuid())
    name         String   @db.VarChar(100)
    image_url    String?
    welcome_text String?  @db.MediumText
    created_at   DateTime @default(now())

    users            User[]
    invitation_codes OrgInvitationCodes[]
    projects         Project[]
    teams            Team[]

    // Has
    @@map("organizations")
}

model OrgInvitationCodes {
    organization_uuid String    @db.VarChar(36)
    organization_name String    @db.VarChar(100)
    code              String    @db.VarChar(8)
    expirates_at      DateTime  @db.DateTime()
    id_user_claimed   Int?      @unique @db.Int
    claimed_at        DateTime?

    organization Organization @relation(fields: [organization_uuid], references: [uuid])
    user         User?        @relation(fields: [id_user_claimed], references: [id])

    @@id([organization_uuid, code])
    @@map("org_invitation_codes")
}
